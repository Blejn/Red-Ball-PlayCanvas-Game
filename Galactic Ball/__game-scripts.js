var Movement=pc.createScript("movement");Movement.attributes.add("speed",{type:"number",default:.1,min:.05,max:.5,precision:2,description:"Controls the movement speed"}),Movement.prototype.initialize=function(){this.force=new pc.Vec3},Movement.prototype.update=function(e){var t=0,s=0;if(this.app.keyboard.isPressed(pc.KEY_LEFT)&&(t=-this.speed),this.app.keyboard.isPressed(pc.KEY_RIGHT)&&(t+=this.speed),this.app.keyboard.isPressed(pc.KEY_UP)&&(s=-this.speed),this.app.keyboard.isPressed(pc.KEY_DOWN)&&(s+=this.speed),this.force.x=t,this.force.z=s,this.force.length()){var i=Math.cos(.25*-Math.PI),o=Math.sin(.25*-Math.PI);this.force.set(this.force.x*i-this.force.z*o,0,this.force.z*i+this.force.x*o),this.force.length()>this.speed&&this.force.normalize().scale(this.speed)}this.entity.rigidbody.applyImpulse(this.force)};var Follow=pc.createScript("follow");Follow.attributes.add("target",{type:"entity",title:"Target",description:"The Entity to follow"}),Follow.attributes.add("distance",{type:"number",default:4,title:"Distance",description:"How far from the Entity should the follower be"}),Follow.prototype.initialize=function(){this.vec=new pc.Vec3},Follow.prototype.update=function(t){if(this.target){var e=this.target.getPosition();e.x+=.75*this.distance,e.y+=1*this.distance,e.z+=.75*this.distance,this.vec.lerp(this.vec,e,.1),this.entity.setPosition(this.vec)}};var Teleport=pc.createScript("teleport");Teleport.attributes.add("target",{type:"entity",title:"Target Entity",description:"The target entity where we are going to teleport"}),Teleport.prototype.initialize=function(){this.target&&this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},Teleport.prototype.onTriggerEnter=function(t){t.script.teleportable&&(t.script.teleportable.teleport(this.entity,this.target),this.entity.sound.play("plum"))};var Teleportable=pc.createScript("teleportable");Teleportable.prototype.initialize=function(){this.lastTeleportFrom=null,this.lastTeleportTo=null,this.lastTeleport=Date.now(),this.startPosition=this.entity.getPosition().clone()},Teleportable.prototype.update=function(t){this.entity.getPosition().y<0&&(this.entity.sound.play("plum"),this.teleport(this.lastTeleportFrom,this.lastTeleportTo))},Teleportable.prototype.teleport=function(t,e){var o;t&&Date.now()-this.lastTeleport<500||(this.lastTeleport=Date.now(),this.lastTeleportFrom=t,this.lastTeleportTo=e,e?(o=e.getPosition()).y+=.5:o=this.startPosition,this.entity.rigidbody.teleport(o),this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO)};var AnimatePosition=pc.createScript("animatePosition");AnimatePosition.attributes.add("offsetCurve",{type:"curve",title:"Offset Curve",curves:["x","y","z"]}),AnimatePosition.attributes.add("duration",{type:"number",default:3,title:"Duration (secs)"}),AnimatePosition.prototype.initialize=function(){this.startPosition=this.entity.getPosition().clone(),this.position=new pc.Vec3,this.time=0},AnimatePosition.prototype.update=function(t){this.time+=t,this.time>this.duration&&(this.time-=this.duration);var i=this.time/this.duration,o=this.offsetCurve.value(i);this.position.copy(this.startPosition),this.position.x+=o[0],this.position.y+=o[1],this.position.z+=o[2],this.entity.setPosition(this.position)};var CoinRotate=pc.createScript("coinRotate");CoinRotate.attributes.add("rotateSpeed",{type:"vec3"}),CoinRotate.prototype.initialize=function(){},CoinRotate.prototype.update=function(t){var e=this.rotateSpeed.clone();e.scale(t),this.entity.rotate(e)};var Health=pc.createScript("health");Health.prototype.initialize=function(){},Health.prototype.update=function(t){};var Startbutton=pc.createScript("startbutton");Startbutton.attributes.add("sceneId",{type:"string",default:"0",title:"Scene ID to Load"}),Startbutton.prototype.initialize=function(){this.entity.element.on("mouseenter",this.onEnter,this),this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("mouseup",this.onRelease,this),this.entity.element.on("mouseleave",this.onLeave,this),this.entity.element.on("touchstart",this.onPress,this),this.entity.element.on("touchend",this.onRelease,this)},Startbutton.prototype.onPress=function(t){var e=this.app.root.findByName("Root");this.loadScene(this.sceneId,(function(){e.destroy()}))},Startbutton.prototype.update=function(t){},Startbutton.prototype.loadScene=function(t,e){var n=t+".json";this.app.loadSceneHierarchy(n,(function(t,n){t?console.error(t):e(n)}))};var LoadScene=pc.createScript("loadScene");LoadScene.attributes.add("target",{type:"entity",title:"Target Entity",description:"The target entity where we are going to teleport"}),LoadScene.attributes.add("sceneId",{type:"string",default:"0",title:"scene id"}),LoadScene.prototype.initialize=function(){this.target&&this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},LoadScene.prototype.onTriggerEnter=function(t){var e=this.app.root.findByName("Root");this.loadScene(this.sceneId,(function(){e.destroy()}))};var Pause=pc.createScript("pause");Pause.prototype.initialize=function(){},Pause.prototype.update=function(e){};var Paused=pc.createScript("paused");Paused.prototype.initialize=function(){},Paused.prototype.update=function(e){};var Paused=pc.createScript("paused");Paused.prototype.initialize=function(){},Paused.prototype.update=function(e){};// pause.js


var FinishLevel=pc.createScript("finishLevel");FinishLevel.attributes.add("image",{type:"entity"}),FinishLevel.attributes.add("target",{type:"entity",title:"Target Entity",description:"The target entity where we are going to teleport"}),FinishLevel.prototype.initialize=function(){this.target&&(this.entity.collision.on("triggerenter",this.onTriggerEnter,this),this.image.enabled=!1)},FinishLevel.prototype.onTriggerEnter=function(e){e.script.teleportable&&(this.image.enabled=!0)};